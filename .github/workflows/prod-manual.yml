name: On Manual Dispatch

on:
  workflow_dispatch:

jobs:
  run-test:
    uses: ./.github/reusable/run-tests-reusable.yaml

  run-lint:
    uses: ./.github/reusable/run-linting-reusable.yaml

  # Not requiring successful dependent jobs
  this-is-like-dev-deploy:

    runs-on: ubuntu-latest
    needs: [run-test,run-lint]
    # Run even if test and lint fail, but job still can be cancelled
    if: success() || failure()

    steps:
    - name: Mock DEV deploy
      run: echo "Hello DEV"


  this-is-like-prod-deploy:

    runs-on: ubuntu-latest
    # Requires test and lint be completed
    needs: [run-test,run-lint,this-is-like-dev-deploy]

    steps:

    - name: Mock PROD deploy
      run: echo "Hello PROD"

